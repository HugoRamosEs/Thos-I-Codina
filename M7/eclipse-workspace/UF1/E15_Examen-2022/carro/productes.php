<?php
$productes = array(
    0 => array(
        "id" => 1,
        "name" => "Producte 1",
        "description" => "Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.",
        "price" => 15.30,
        "created" => "2022-10-14 11:23",
        "modified" => "2022-10-14 11:23",
        "status" => 1
    ),
    1 => array(
        "id" => 2,
        "name" => "Producte 2",
        "description" => "Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.",
        "price" => 12.40,
        "created" => "2022-10-14 11:23",
        "modified" => "2022-10-14 11:23",
        "status" => 1
    ),
    2 => array(
        "id" => 3,
        "name" => "Producte 3",
        "description" => "Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.",
        "price" => 11.00,
        "created" => "2022-10-14 11:23",
        "modified" => "2022-10-14 11:23",
        "status" => 1
    ),
    3 => array(
        "id" => 4,
        "name" => "Producte 4",
        "description" => "Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.",
        "price" => 115.65,
        "created" => "2022-10-14 11:23",
        "modified" => "2022-10-14 11:23",
        "status" => 1
    ),
    4 => array(
        "id" => 5,
        "name" => "Producte 5",
        "description" => "Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.",
        "price" => 9.20,
        "created" => "2022-10-14 11:23",
        "modified" => "2022-10-14 11:23",
        "status" => 1
    ),
    5 => array(
        "id" => 6,
        "name" => "Producte 6",
        "description" => "Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.",
        "price" => 25.90,
        "created" => "2022-10-14 11:23",
        "modified" => "2022-10-14 11:23",
        "status" => 1
    ),
    'aa' => array(
        "id" => 7,
        "name" => "Producte 7",
        "description" => "Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.",
        "price" => 14.95,
        "created" => "2022-10-14 11:23",
        "modified" => "2022-10-14 11:23",
        "status" => 1
    ),
    "ab" => array(
        "id" => 8,
        "name" => "Producte 8",
        "description" => "Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.",
        "price" => 10.00,
        "created" => "2022-10-14 11:23",
        "modified" => "2022-10-14 11:23",
        "status" => 1
    ),
    "ac" => array(
        "id" => 9,
        "name" => "Producte 9",
        "description" => "Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.",
        "price" => 6.30,
        "created" => "2022-10-14 11:23",
        "modified" => "2022-10-14 11:23",
        "status" => 1
    )
);




/*   https://www.balay.es/catalogo-electrodomesticos/frigorificos-y-congeladores
 * 
 * 
 * 
 * 

{"response":
{"cheap":"0","expensive":"0","items":
[{"productIndex":"0",
    "sku":"3FAF494XE",
    "type":"shop",
    "title":"Frigorífico americano",
    "isInComparison":false,
    "comparable":true,
    "productsInComparisonSize":0,
    "headers":["",
        "Frigorífico americano",
        "",
        "178.7 x 90.8 cm",
        "Acero inoxidable antihuellas",
        "3FAF494XE"
        ],
   "price":{"value":2155.0,"displayValue":"2.155,00 €"},
   "conversionPrice":{"value":0.0},
   "rrp":{"value":2369.0,"displayValue":"2.369,00 €"}
   "stockStatus":{
       "trafficLight":"yellow",
       "text":"Stock limitado",
       "buyable":true,
       "permanentlyNotAvailable":false
        },
   "link":"/catalogo-electrodomesticos/frigorificos-y-congeladores/americanos/3FAF494XE",
   "review
        "rating":3.7,
        "reviewCount":19,
        "href":"/catalogo-electrodomesticos/frigorificos-y-congeladores/americanos/3FAF494XE#/Tabs=section-reviews/"
        },
    "productImage":[
        {
        "src":"//media3.bsh-group.com/Product_Shots/{width}x{height}/12775491_3FAF494XE_STP_def.jpg",
        "alt":"3FAF494XE",
        "href":"/catalogo-electrodomesticos/frigorificos-y-congeladores/americanos/3FAF494XE"
        }],
    "hookline":["Los frigoríficos americanos Balay tienen una gran capacidad y el equipamiento más completo, porque tu comodidad es lo primero."],
    "keyBenefits":[{
        "plainText":"Control electrónico táctil digital, todo el control con el mejor diseño. Fácil de usar y de limpiar.",
        "plainTextWithFootnote":"Control electrónico táctil digital, todo el control con el mejor diseño. Fácil de usar y de limpiar.",
        "hotStoryId":"null"
         },
        {
        "plainText":"Electrónica táctil integrada en la puerta, todo el control con el mejor diseño. Fácil de usar y de limpiar.",
        "plainTextWithFootnote":"Electrónica táctil integrada en la puerta, todo el control con el mejor diseño. Fácil de usar y de limpiar.",
        "hotStoryId":"null"
        },
        {
        "plainText":"Sus tiradores te aportan la mayor comodidad a la hora de abrir tu frigorífico.",
        "plainTextWithFootnote":"Sus tiradores te aportan la mayor comodidad a la hora de abrir tu frigorífico.",
        "hotStoryId":"1502839",
        "hotStorymediaType":"hs-image"
        },
        {
        "plainText":"Con 2 cajones Big Box, dispensador de cubitos e iluminación mediante LED, tienes el equipamiento más completo en tu congelador.",
        "plainTextWithFootnote":"Con 2 cajones Big Box, dispensador de cubitos e iluminación mediante LED, tienes el equipamiento más completo en tu congelador.",
        "hotStoryId":"null"
        },
        {
        "plainText":"Dispensador de agua, hielo y hielo picado con altura para jarras de hasta 27 cm. Produce 112 cubitos al día.",
        "plainTextWithFootnote":"Dispensador de agua, hielo y hielo picado con altura para jarras de hasta 27 cm. Produce 112 cubitos al día.",
        "hotStoryId":"1502853"
       },
   "relevance":0.0,
   "popularity":0,
   "productSubscribable":false,
   "onlineDate":1593727200,
   "brand":"BALAY",
   "campaignIcons":[{
        "refUrl":"/ajax/campaign/SHOP/3FAF494XE/campaignIcon-10934715",
        "image":"//media3.bsh-group.com/Images/75x75/17721322_servicio-amigo-plus.png"
        },
        {
        "refUrl":"/ajax/campaign/SHOP/3FAF494XE/campaignIcon-7676865",
        "image":"//media3.bsh-group.com/Images/75x75/6910344_picto-sorteo-valoraciones.png"
        }],
    "constructionType":"MDA",
    "energyDocuments":[{
        "euDocuments":[{
        "docTypes":["EL"],
        "url":"https://media3.bsh-group.com/Documents/energylabel/es-ES/3FAF494XE.pdf",
        "title":"EU etiqueta energética",
        "code":"3FAF494XE_EL",
        "energyIconSrc":["//media3.bsh-group.com/Feature_Icons/120x120/ENERGYLABEL_3FAF494XE_es-ES.png"]
        },
        {
        "docTypes":["DS"],
        "url":"https://media3.bsh-group.com/Documents/eudatasheet/es-ES/3FAF494XE.pdf",
        "title":"Ficha de producto norma EU",
        "code":"3FAF494XE_DS",
        "energyIconSrc":["//media3.bsh-group.com/Feature_Icons/120x120/ENERGYLABEL_3FAF494XE_es-ES.png"]}]}],
    "homeConnectable":false,
    "highlights":["Refrigeración y Congelación Súper",
        "Vario zone",
        "NoFrost","Electrónica LCD"],
        "productDisplayTypeSets":false,
        "basicPriceValue":0.0,
        "showReviews":true,
        "productGroup":"Frigorífico americano",
        "turnover_units":0},
{"productIndex":"1",
    "sku":"3KME592XI",
    "type":"shop",
    "title":"Multipuerta",
    "isInComparison":false,
    "comparable":true,
    "productsInComparisonSize":0,
    "headers":[
        "",
        "Multipuerta",
        "",
        "183 x 91 cm",
        "Acero inoxidable antihuellas",
        "3KME592XI"],
   "price":{
        "value":2019.0,
        "displayValue":"2.019,00 €"
        },
    "conversionPrice":{"value":0.0},
    "rrp":{"value":2219.0,"displayValue":"2.219,00 €"},
    "stockStatus":{
        "trafficLight":"green",
        "text":"Disponible",
        "buyable":true,
        "permanentlyNotAvailable":false
        },
    "link":"/catalogo-electrodomesticos/frigorificos-y-congeladores/combi/libre-instalacion/3KME592XI",
    "review":{
        "rating":0.0,
        "reviewCount":0,
        "href":"/catalogo-electrodomesticos/frigorificos-y-congeladores/combi/libre-instalacion/3KME592XI#/Tabs=section-reviews/"
        },
    "productImage":[{
        "src":"//media3.bsh-group.com/Product_Shots/{width}x{height}/19602581_3KME592XI_STP_def.jpg",
        "alt":"3KME592XI",
        "href":"/catalogo-electrodomesticos/frigorificos-y-congeladores/combi/libre-instalacion/3KME592XI"
        }],
    "hookline":[
        "Máxima capacidad y flexibilidad con el equipamiento más completo, para ofrecerte versatilidad y comodidad por todo lo alto."
       ],
    "keyBenefits":[{
        "plainText":"No te imaginas todos los alimentos que pueden llegar a caber en el cajón Big Box, una gran tarta, un pavo…",
        "plainTextWithFootnote":"No te imaginas todos los alimentos que pueden llegar a caber en el cajón Big Box, una gran tarta, un pavo…",
        "hotStoryId":"1502856"
        }],
    "relevance":0.0,
    "popularity":0,
    "productSubscribable":false,
    "onlineDate":1652738400,"brand":"BALAY",
    "campaignIcons":[{
        "refUrl":"/ajax/campaign/SHOP/3KME592XI/campaignIcon-10934715",
        "image":"//media3.bsh-group.com/Images/75x75/17721322_servicio-amigo-plus.png"
        },
        {
        "refUrl":"/ajax/campaign/SHOP/3KME592XI/campaignIcon-7676865",
        "image":"//media3.bsh-group.com/Images/75x75/6910344_picto-sorteo-valoraciones.png"
        }],
    "constructionType":"MDA",
    "energyDocuments":[
*/

/* PREGUNTA 03
 * 
 * *productes.php
 * Fes un webscrapping contra la pàgina 
 * https://www.balay.es/catalogo-electrodomesticos/frigorificos-y-congeladores
 * i afegieix els registres a productes[ ].
 * productes["id"] està a "productIndex"
 * procutes["name"] està en la concatenació de "title" i "sku"
 * productes["price"] està a "price":{"value"
 * productes["description"] està en la concatenació dels "plainText" dins de "keyBenefits".
 * productes["created"] i ["modified"] eś la data d'aquest moment en format YYYY-MM-DD hh-mm
 * productes["status"] és sempre 1. 
*/

$url = "https://www.balay.es/catalogo-electrodomesticos/frigorificos-y-congeladores";
$html = file_get_contents($url);
//var_dump($html);

$products = [];
foreach ($data["items"] as $product) {
    
    $product_id = $product["productIndex"];
    
    $product_name = $product["title"] . " " . $product["sku"];
    
    $product_price = $product["price"]["value"];
    
    $product_description = "";
    
    foreach ($product["keyBenefits"] as $benefit) {
        
        $product_description .= $benefit["plainText"] . " ";
        
    }
    
    $product_created = date("Y-m-d H:i");
    
    $product_modified = date("Y-m-d H:i");
    
    $product_status = 1;
    
    
    $products[] = [
        
        'product_id' => $product_id,
        
        'product_name' => $product_name,
        
        'product_price' => $product_price,
        
        'product_description' => $product_description,
        
        'product_created' => $product_created,
        
        'product_modified' => $product_modified,
        
        'product_status' => $product_status,
    ];
}
var_dump($products);

?>


